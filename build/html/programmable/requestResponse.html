

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Buy-Side Request/Response Service &mdash; EMSX API Programmers Guide 0.0.5 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="EMSX API Programmers Guide 0.0.5 documentation" href="../index.html"/>
        <link rel="up" title="Programmable EMSX API" href="index.html"/>
        <link rel="next" title="Sell-Side Request/Response Service" href="requestResponseSs.html"/>
        <link rel="prev" title="Description of Request/Response Service" href="description.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> EMSX API Programmers Guide
          

          
          </a>

          
            
            
              <div class="version">
                0.0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/index.html">Server Side EMSX API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Programmable EMSX API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="session.html">Session Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="description.html">Description of Request/Response Service</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Buy-Side Request/Response Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#assign-trader-request">Assign Trader Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#broker-spec-request">Broker Spec Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cancel-route-extended-request">Cancel Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-order-request">Create Order Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-order-and-route-extended-request">Create Order and Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-order-and-route-manually-request">Create Order And Route Manually Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-order-request">Delete Order Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-all-field-metadata-request">Get All Field Metadata Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-broker-strategies-with-asset-class-request">Get Broker Strategies with Asset Class Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-broker-strategy-info-with-asset-class-request">Get Broker Strategy Info with Asset Class Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-brokers-with-asset-class-request">Get Brokers with Asset Class Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-field-metadata-request">Get Field Metadata Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-teams-request">Get Teams Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#group-route-extended-request">Group Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manaul-fill-request">Manaul Fill Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-order-request">Modify Order Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-route-extended-request">Modify Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#route-extended-request">Route Extended Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#route-manually-extended-request">Route Manually Extended Request</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="requestResponseSs.html">Sell-Side Request/Response Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxSubscription.html">EMSX Subscription</a></li>
<li class="toctree-l2"><a class="reference internal" href="emsxHistory.html">EMSX History Request</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">EMSX API Programmers Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Programmable EMSX API</a> &raquo;</li>
      
    <li>Buy-Side Request/Response Service</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/programmable/requestResponse.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="buy-side-request-response-service">
<h1>Buy-Side Request/Response Service<a class="headerlink" href="#buy-side-request-response-service" title="Permalink to this headline">¶</a></h1>
<p>The EMSX API allows developers to use the Request/Response services for order and route creation, modification,
queries related to orders and routes as well as EMSX Team details. Depending on the type of action required, the
application programmer must create a specific request, populate it with required parameters and send that request to
the EMSX API service, which provides the response. Communication with the request/response service requires the
following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Create a session (if session does not yet exist).</li>
<li>Connect session to <code class="docutils literal"><span class="pre">//blp/emapisvc_beta</span></code> or <code class="docutils literal"><span class="pre">//blp/emapisvc</span></code> service and start it.</li>
<li>Fetch a service object from the session representing emapisvc.</li>
<li>Use the service object from above to create a Request object of the desired type</li>
<li>Send request object via sendRequest method of session object, pass object of type EventQueue to the sendRequest.</li>
<li>Loop through the EventQueue object until event of type <code class="docutils literal"><span class="pre">Event::RESPONSE</span></code> is read.</li>
</ol>
</div></blockquote>
<p>These are initialized in the constructor as below and are then available for the life of the application for submission of various requests.</p>
<div class="section" id="assign-trader-request">
<h2>Assign Trader Request<a class="headerlink" href="#assign-trader-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">AssignTrader</span></code> request allows EMSX API to reassign order to another user UUID. A typical setup will have the different UUID as another part of the TEAM setup for the order creater UUID. This will allow systematically generated trades to be reassigned to another human trader if need be from the EMSX API.</p>
<p>Assigned trader must be in same EMBR&lt;GO&gt; group for this to work. EMBR&lt;GO&gt; is an internal Bloomberg function the EMSX account managers will use to set this feature on behalf of the client. The EMSX account manager will check off the ability to reassign before the AssignTrader request will work. Once this feature is on, trading on behalf other UUID feature will no longer work for that team.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/AssignTrader.cpp">Assign Trader cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/AssignTrader.cs">Assign Trader cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/AssignTrader.cls">Assign Trader vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/AssignTrader.java">Assign Trader java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/AssignTrader.py">Assign Trader py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;AssignTrader&quot;</span><span class="p">)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3744303</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3744341</span><span class="p">)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ASSIGNEE_TRADER_UUID&quot;</span><span class="p">,</span> <span class="mi">12109783</span><span class="p">)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="broker-spec-request">
<h2>Broker Spec Request<a class="headerlink" href="#broker-spec-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">BrokerSpec</span></code> request allows EMSX API users to call all the production broker strategy name and fields and FIX tags
associated with the broker strategies. Unfortunately, this is currently only available for production broker strategy
fields. The service name is <code class="docutils literal"><span class="pre">\\blp\emsx.brokerspec</span></code>.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/BrokerSpec.cs">Broker Spec cs</a></td>
<td>&nbsp;</td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/BrokerSpec.cls">Broker Spec vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/AssignTrader.java">Broker Spec java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/BrokerSpec.py">Broker Spec py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="cancel-route-extended-request">
<h2>Cancel Route Extended Request<a class="headerlink" href="#cancel-route-extended-request" title="Permalink to this headline">¶</a></h2>
<p>In EMSX&lt;GO&gt; we have a notion of parent order and child routes. The <code class="docutils literal"><span class="pre">CancelRoute</span></code> request is to effectively send out
a cancellation request to the execution venue of the current live route. Submission of <code class="docutils literal"><span class="pre">CancelRoute</span></code> does not
automatically cancel the outstanding route. This action needs to be acknowledged and performed by the execution venue
of the route.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="32%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CancelRoute.cpp">Cancel Route cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CancelRoute.cs">Cancel Route cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/AssignTrader.cls">Cancel Route vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CancelRoute.java">Cancel Route java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CancelRoute.py">Cancel Route py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CancelRoute&quot;</span><span class="p">)</span>

            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>
            <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)        # UUID of trader who owns the order</span>

            <span class="n">routes</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;ROUTES&quot;</span><span class="p">)</span>

            <span class="n">route</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span>
            <span class="n">route</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">3744354</span><span class="p">)</span>
            <span class="n">route</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_ID&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-order-request">
<h2>Create Order Request<a class="headerlink" href="#create-order-request" title="Permalink to this headline">¶</a></h2>
<p>Creating an order requires the user to create a request from the service object of type <code class="docutils literal"><span class="pre">CreateOrder</span></code> and fill in the required fields before submitting the request.</p>
<p>If the handling instruction is for DMA access or any other non-standard handling instructions, EMSX API will not allow users to stage the order from the EMSX API unless the broker enables the broker code for EMSX API.  This is also true for custom Time in Force fields. Any non-standard TIF will also be restricted from staging unless the broker enables the broker code for EMSX API.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="32%" />
<col width="32%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CreateOrder.cpp">Create Order cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CreateOrder.cs">Create Order cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/CreateOrder.cls">Create Order vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CreateOrder.java">Create Order java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CreateOrder.py">Create Order py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CreateOrder&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are mandatory</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SIDE&quot;</span><span class="p">,</span> <span class="s2">&quot;BUY&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are optional</span>
            <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_BASKET_NAME&quot;, &quot;HedgingBasket&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_BROKER&quot;, &quot;BMTB&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE1&quot;, &quot;Note1&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE2&quot;, &quot;Note2&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE3&quot;, &quot;Note3&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE4&quot;, &quot;Note4&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CUSTOM_NOTE5&quot;, &quot;Note5&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_EXCHANGE_DESTINATION&quot;, &quot;ExchDest&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_INVESTOR_ID&quot;, &quot;InvID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ORDER_ORIGIN&quot;, &quot;&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ORDER_REF_ID&quot;, &quot;UniqueID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 34341)</span>
            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
            <span class="c1">#request.set(&quot;EMSX_SETTLE_CURRENCY&quot;, &quot;USD&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_SETTLE_DATE&quot;, 20170106)</span>
            <span class="c1">#request.set(&quot;EMSX_SETTLE_TYPE&quot;, &quot;T+2&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

        <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

    <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
        <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-order-and-route-extended-request">
<h2>Create Order and Route Extended Request<a class="headerlink" href="#create-order-and-route-extended-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">CreateOrderAndRouteEx</span></code> request can be used for both strategy and non-strategy broker destinations.  Creating
an order and routing with strategy requires the user to create a request from the service object of type ``
CreateOrderAndRouteEx`` and fill in the required fields before submitting the request.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<blockquote>
<div>The user will first need to use various <code class="docutils literal"><span class="pre">Get___</span></code> requests to obtain all the necessary information to use the broker strategies the user is enabled for, returned in response. Subsequently, the user can then request <code class="docutils literal"><span class="pre">GetBrokerStrategiesWithAssetClass</span></code> to get all the broker strategies user is enabled for that particular broker code and asset class.</div></blockquote>
<p class="last">Lastly, <code class="docutils literal"><span class="pre">GetBrokerStrategyInfoWithAssetClass</span></code> will get all the fields for the provided broker strategy in the particular order in which they need to be submitted in <code class="docutils literal"><span class="pre">CreateOrderAndRouteEx</span></code> and <code class="docutils literal"><span class="pre">RouteEx</span></code> requests.</p>
</div>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="32%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CreateOrderAndRouteEx.cpp">Create Order And Route Extended cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CreateOrderAndRouteEx.cs">Create Order And Route Extended cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/CreateOrderAndRouteEx.cls">Create Order And Route Extended vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CreateOrderAndRouteEx.java">Create Order And Route Extended java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CreateOrderAndRouteEx.py">Create Order And Route Extended py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CreateOrderAndRouteEx&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are mandatory</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SIDE&quot;</span><span class="p">,</span> <span class="s2">&quot;BUY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are optional</span>
            <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
</pre></div>
</div>
</div>
<div class="section" id="create-order-and-route-manually-request">
<h2>Create Order And Route Manually Request<a class="headerlink" href="#create-order-and-route-manually-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">CreateOrderAndRouteManually</span></code> request is generally used for phone orders where the placement is external to EMSX API. This request creates an order and notifies EMSX&lt;GO&gt; that this order is routed to the execution venue.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="32%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/CreateOrderAndRouteManually.cpp">Create Order And Route Manually cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/CreateOrderAndRouteManually.cs">Create Order And Route Manually cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/CreateOrderAndRouteManually.cls">Create Order And Route Manually vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/CreateOrderAndRouteManually.java">Create Order And Route Manually java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/CreateOrderAndRouteManually.py">Create Order And Route Manually py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;CreateOrderAndRouteManually&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are mandatory</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SIDE&quot;</span><span class="p">,</span> <span class="s2">&quot;BUY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are optional</span>
            <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_EXCHANGE_DESTINATION&quot;, &quot;ExchDest&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_INVESTOR_ID&quot;, &quot;InvID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ORDER_ORIGIN&quot;, &quot;&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ORDER_REF_ID&quot;, &quot;UniqueID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 34341)</span>
            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
            <span class="c1">#request.set(&quot;EMSX_SETTLE_DATE&quot;, 20170106)</span>
            <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-order-request">
<h2>Delete Order Request<a class="headerlink" href="#delete-order-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">DeleteOrder</span></code> request deletes an existing order in EMSX&lt;GO&gt;. This is not the same action as canceling the parent order. In fact, EMSX API does not expose Cancel Order status as in EMSX&lt;GO&gt;.</p>
<p>The primary reason behind this is because the cancel rrder in EMSX&lt;GO&gt; really just puts an order in an inoperable state and doesn&#8217;t really serve any meaningful function.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/DeleteOrder.cpp">Delete Order cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/DeleteOrder.cs">Delete Order cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/DeleteOrder.cls">Delete Order vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/DeleteOrder.java">Delete Order java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/DeleteOrder.py">Delete Order py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;DeleteOrder&quot;</span><span class="p">)</span>

            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appendValue</span><span class="p">(</span><span class="mi">3744363</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appendValue</span><span class="p">(</span><span class="mi">3744364</span><span class="p">)</span>


            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-all-field-metadata-request">
<h2>Get All Field Metadata Request<a class="headerlink" href="#get-all-field-metadata-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">GetAllFiedlMetaData</span></code> request provides all field metadata in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="32%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetAllFieldMetaData.cpp">Get All Field Meta Data cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetAllFieldMetaData.cs">Get All Field Meta Data cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetAllFieldMetaData.cls">Get All Field Meta Data vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetAllFieldMetaData.java">Get All Field Meta Data java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetAllFieldMetaData.py">Get All Field Meta Data py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetAllFieldMetaData&quot;</span><span class="p">)</span>

            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
<p>Process response messages:-</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processResponseEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing RESPONSE event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">print</span> <span class="s2">&quot;MESSAGE: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>
        <span class="k">print</span> <span class="s2">&quot;CORRELATION ID: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="o">.</span><span class="n">correlationIds</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>


        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">correlationIds</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
            <span class="k">print</span> <span class="s2">&quot;MESSAGE TYPE: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">ERROR_INFO</span><span class="p">:</span>
                <span class="n">errorCode</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">getElementAsInteger</span><span class="p">(</span><span class="s2">&quot;ERROR_CODE&quot;</span><span class="p">)</span>
                <span class="n">errorMessage</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">getElementAsString</span><span class="p">(</span><span class="s2">&quot;ERROR_MESSAGE&quot;</span><span class="p">)</span>
                <span class="k">print</span> <span class="s2">&quot;ERROR CODE: </span><span class="si">%d</span><span class="se">\t</span><span class="s2">ERROR MESSAGE: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">errorCode</span><span class="p">,</span><span class="n">errorMessage</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">GET_ALL_FIELD_METADATA</span><span class="p">:</span>

                <span class="n">md</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;MetaData&quot;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">md</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>

                    <span class="n">emsx_field_name</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsString</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_NAME&quot;</span><span class="p">)</span>
                    <span class="n">emsx_disp_name</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsString</span><span class="p">(</span><span class="s2">&quot;EMSX_DISP_NAME&quot;</span><span class="p">)</span>
                    <span class="n">emsx_type</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsString</span><span class="p">(</span><span class="s2">&quot;EMSX_TYPE&quot;</span><span class="p">)</span>
                    <span class="n">emsx_level</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsInteger</span><span class="p">(</span><span class="s2">&quot;EMSX_LEVEL&quot;</span><span class="p">)</span>
                    <span class="n">emsx_len</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getElementAsInteger</span><span class="p">(</span><span class="s2">&quot;EMSX_LEN&quot;</span><span class="p">)</span>

                    <span class="k">print</span> <span class="s2">&quot;MetaData: </span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">,</span><span class="si">%d</span><span class="s2">,</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">emsx_field_name</span><span class="p">,</span> <span class="n">emsx_disp_name</span><span class="p">,</span> <span class="n">emsx_type</span><span class="p">,</span> <span class="n">emsx_level</span><span class="p">,</span> <span class="n">emsx_len</span><span class="p">)</span>

            <span class="k">global</span> <span class="n">bEnd</span>
            <span class="n">bEnd</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">processMiscEvents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>

    <span class="k">print</span> <span class="s2">&quot;Processing &quot;</span> <span class="o">+</span> <span class="n">event</span><span class="o">.</span><span class="n">eventType</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot; event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">print</span> <span class="s2">&quot;MESSAGE: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">tostring</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="get-broker-strategies-with-asset-class-request">
<h2>Get Broker Strategies with Asset Class Request<a class="headerlink" href="#get-broker-strategies-with-asset-class-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">GetBrokerStrategiesWithAssetClass</span></code> request provides all broker strategy fields with asset class data in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetBrokerStrategiesWithAssetClass.cpp">Get Broker Strategies With Asset Class cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetBrokerStrategiesWithAssetClass.cs">Get Broker Strategies With Asset Class cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetBrokerStrategiesWithAssetClass.cls">Get Broker Strategies With Asset Class vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetBrokerStrategiesWithAssetClass.java">Get Broker Strategies With Asset Class java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetBrokerStrategiesWithAssetClass.py">Get Broker Strategies With Asset Class py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetBrokerStrategiesWithAssetClass&quot;</span><span class="p">)</span>

            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ASSET_CLASS&quot;</span><span class="p">,</span><span class="s2">&quot;EQTY&quot;</span><span class="p">)</span>  <span class="c1"># one of EQTY, OPT, FUT or MULTILEG_OPT</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span><span class="s2">&quot;BMTB&quot;</span><span class="p">)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-broker-strategy-info-with-asset-class-request">
<h2>Get Broker Strategy Info with Asset Class Request<a class="headerlink" href="#get-broker-strategy-info-with-asset-class-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">GetBrokerStrategyInfoWithAssetClass</span></code> request provides all broker strategy information fields with asset classdata in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetBrokerStrategyInfoWithAssetClass.cpp">Get Broker Strategy Info With Asset Class cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetBrokerStrategyInfoWithAssetClass.cs">Get Broker Strategy Info With Asset Class cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetBrokerStrategyInfoWithAssetClass.cls">Get Broker Strategy Info With Asset Class vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetBrokerStrategyInfoWithAssetClass.java">Get Broker Strategy Info With Asset Class java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetBrokerStrategyInfoWithAssetClass.py">Get Broker Strategy Info With Asset Class py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetBrokerStrategyInfoWithAssetClass&quot;</span><span class="p">)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_REQUEST_SEQ&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ASSET_CLASS&quot;</span><span class="p">,</span><span class="s2">&quot;EQTY&quot;</span><span class="p">)</span>  <span class="c1"># one of EQTY, OPT, FUT or MULTILEG_OPT</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span><span class="s2">&quot;BMTB&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY&quot;</span><span class="p">,</span><span class="s2">&quot;VWAP&quot;</span><span class="p">)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-brokers-with-asset-class-request">
<h2>Get Brokers with Asset Class Request<a class="headerlink" href="#get-brokers-with-asset-class-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">GetBrokersWithAssetClass</span></code> request provides all broker information with asset class data in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="34%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetBrokersWithAssetClass.cpp">Get Brokers With Asset Class cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetBrokersWithAssetClass.cs">Get Brokers With Asset Class cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetBrokersWithAssetClass.cls">Get Brokers With Asset Class vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetBrokersWithAssetClass.java">Get Brokers With Asset Class java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetBrokersWithAssetClass.py">Get Brokers With Asset Class py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetBrokersWithAssetClass&quot;</span><span class="p">)</span>

            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ASSET_CLASS&quot;</span><span class="p">,</span><span class="s2">&quot;EQTY&quot;</span><span class="p">)</span>  <span class="c1"># one of EQTY, OPT, FUT or MULTILEG_OPT</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
                    <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-field-metadata-request">
<h2>Get Field Metadata Request<a class="headerlink" href="#get-field-metadata-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">GetFieldMetaData</span></code> request provides all field metadata in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetFieldMetaData.cpp">Get Field Meta Data cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetFieldMetaData.cs">Get Field Meta Data cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetFieldMetaData.cls">Get Field Meta Data vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetFieldMetaData.java">Get Field Meta Data java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetFieldMetaData.py">Get Field Meta Data py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetFieldMetaData&quot;</span><span class="p">)</span>

            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

            <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_NAMES&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appendValue</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_NAMES&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">appendValue</span><span class="p">(</span><span class="s2">&quot;EMSX_P_A&quot;</span><span class="p">)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-teams-request">
<h2>Get Teams Request<a class="headerlink" href="#get-teams-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">GetTeams</span></code> request provides all the team details in a response message.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="31%" />
<col width="37%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GetTeams.cpp">Get Teams cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GetTeams.cs">Get Teams cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GetTeams.cls">Get Teams vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GetTeams.java">Get Teams java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GetTeams.py">Get Teams py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GetTeams&quot;</span><span class="p">)</span>

            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="group-route-extended-request">
<h2>Group Route Extended Request<a class="headerlink" href="#group-route-extended-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">GroupRouteEx</span></code> request submits an entire list as a single route to a basket/program broker strategy destination.</p>
<p>This request should only be used if the intention is to submit an entire list or basket of securities to a single broker strategy destination. This should not be confused with maintaining a list or a basket from a portfolio perspective.</p>
<p>Currently, this is a two-step process in EMSX API.  The first step is for the user will need to use <code class="docutils literal"><span class="pre">CreateOrder</span></code> request to create the order and add the <code class="docutils literal"><span class="pre">EMSX_BASKET_NAME</span></code> in the field. The second step is to submit the list using <code class="docutils literal"><span class="pre">GroupRouteEx</span></code> request and include the <code class="docutils literal"><span class="pre">EMSX_SEQUENCE</span></code> number inside the array.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/GroupRouteEx.cpp">Group Route Extended cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/GroupRouteEx.cs">Group Route Extended cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/GroupRouteEx.cls">Group Route Extended vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/GroupRouteEx.java">Group Route Extended java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/GroupRouteEx.py">Group Route Extended py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;GroupRouteEx&quot;</span><span class="p">)</span>

            <span class="c1"># Multiple order numbers can be added</span>
            <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745211</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745212</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745213</span><span class="p">)</span>

            <span class="c1"># The fields below are mandatory</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT_PERCENT&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>  <span class="c1"># Note the amount here is %age of order amount</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BMTB&quot;</span><span class="p">);</span>

            <span class="c1"># For GroupRoute, the below values need to be added, but are taken</span>
            <span class="c1"># from the original order when the route is created.</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are optional</span>
            <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_BOOKNAME&quot;,&quot;BookName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 34341)</span>
            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
            <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>
            <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)</span>

            <span class="c1"># Set the Request Type if this is for multi-leg orders</span>
            <span class="c1"># only valid for options</span>
            <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            requestType = request.getElement(&quot;EMSX_REQUEST_TYPE&quot;)</span>
<span class="sd">            requestType.setChoice(&quot;Multileg&quot;)</span>
<span class="sd">            multileg = requestType.getElement(&quot;Multileg&quot;)</span>
<span class="sd">            multileg.setElement(&quot;EMSX_AMOUNT&quot;,10)</span>
<span class="sd">            multileg.getElement(&quot;EMSX_ML_RATIO&quot;).appendValue(2)</span>
<span class="sd">            multileg.getElement(&quot;EMSX_ML_RATIO&quot;).appendValue(3)</span>
<span class="sd">            &#39;&#39;&#39;</span>

            <span class="c1"># Add the Route Ref ID values</span>
            <span class="n">routeRefIDPairs</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_REF_ID_PAIRS&quot;</span><span class="p">)</span>
            <span class="n">route1</span> <span class="o">=</span> <span class="n">routeRefIDPairs</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span>
            <span class="n">route1</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_REF_ID&quot;</span><span class="p">,</span><span class="s2">&quot;MyRouteRef1&quot;</span><span class="p">)</span>
            <span class="n">route1</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span><span class="mi">3745211</span><span class="p">)</span>

            <span class="n">route2</span> <span class="o">=</span> <span class="n">routeRefIDPairs</span><span class="o">.</span><span class="n">appendElement</span><span class="p">();</span>
            <span class="n">route2</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_REF_ID&quot;</span><span class="p">,</span><span class="s2">&quot;MyRouteRef2&quot;</span><span class="p">)</span>
            <span class="n">route2</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span><span class="mi">3745212</span><span class="p">)</span>

            <span class="n">route3</span> <span class="o">=</span> <span class="n">routeRefIDPairs</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span>
            <span class="n">route3</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_ROUTE_REF_ID&quot;</span><span class="p">,</span><span class="s2">&quot;MyRouteRef3&quot;</span><span class="p">)</span>
            <span class="n">route3</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span><span class="mi">3745213</span><span class="p">)</span>

            <span class="c1"># Below we establish the strategy details. Strategy details</span>
            <span class="c1"># are common across all orders in a GroupRoute operation.</span>

            <span class="n">strategy</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY_PARAMS&quot;</span><span class="p">)</span>
            <span class="n">strategy</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY_NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;VWAP&quot;</span><span class="p">)</span>

            <span class="n">indicator</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY_FIELD_INDICATORS&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">strategy</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="s2">&quot;EMSX_STRATEGY_FIELDS&quot;</span><span class="p">)</span>

            <span class="c1"># Strategy parameters must be appended in the correct order. See the output</span>
            <span class="c1"># of GetBrokerStrategyInfo request for the order. The indicator value is 0 for</span>
            <span class="c1"># a field that carries a value, and 1 where the field should be ignored</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;09:30:00&quot;</span><span class="p">)</span>  <span class="c1"># StartTime</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;10:30:00&quot;</span><span class="p">)</span>  <span class="c1"># EndTime</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># Max%Volume</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># %AMSession</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># OPG</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># MOC</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># CompletePX</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># TriggerPX</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># DarkComplete</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># DarkCompPX</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># RefIndex</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">data</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_DATA&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>          <span class="c1"># Discretion</span>
            <span class="n">indicator</span><span class="o">.</span><span class="n">appendElement</span><span class="p">()</span><span class="o">.</span><span class="n">setElement</span><span class="p">(</span><span class="s2">&quot;EMSX_FIELD_INDICATOR&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="manaul-fill-request">
<h2>Manaul Fill Request<a class="headerlink" href="#manaul-fill-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">ManualFill</span></code> request can be used on the sell-side EMSX&lt;GO&gt; settings to create fills and notifies EMSX&lt;GO&gt;.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/ManualFill.java">Manual Fill java</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># ManualFill.py</span>
</pre></div>
</div>
</div>
<div class="section" id="modify-order-request">
<h2>Modify Order Request<a class="headerlink" href="#modify-order-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">ModifyOrderEx</span></code> request modifies an existing or previously created order in EMSX&lt;GO&gt; or using EMSX API.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="48%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/ModifyOrderEx.java">Modify Order Extended java</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#ModifyOrder.py</span>
</pre></div>
</div>
</div>
<div class="section" id="modify-route-extended-request">
<h2>Modify Route Extended Request<a class="headerlink" href="#modify-route-extended-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">ModifyRouteEx</span></code> request modifies an existing or previously created child routes in EMSX&lt;GO&gt; or using EMSX API.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/ModifyRouteEx.java">Modify Route Extended java</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#ModifyRouteEx.py</span>
</pre></div>
</div>
</div>
<div class="section" id="route-extended-request">
<h2>Route Extended Request<a class="headerlink" href="#route-extended-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">RouteEx</span></code> request submits an existing order into various execution veneues. This request is used primarily to submit a child route based on previously created parent order.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/RouteEx.cpp">Route Extended cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/RouteEx.cs">Route Extended cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/RouteEx.cls">Route Extended vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/RouteEx.java">Route Extended java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/RouteEx.py">Route Extended py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;RouteEx&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are mandatory</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745217</span><span class="p">)</span> <span class="c1"># Order number</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are optional</span>
            <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
            <span class="c1">##request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 34341)</span>
            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
            <span class="c1">#request.set(&quot;EMSX_ROUTE_REF_ID&quot;, &quot;UniqueRef&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>
            <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="route-manually-extended-request">
<h2>Route Manually Extended Request<a class="headerlink" href="#route-manually-extended-request" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">RouteManuallyEx</span></code> requestis generally used for phone orders where the placement is external to EMSX API. This request creates an order and notifies EMSX&lt;GO&gt; that this order is routed to the execution venue.</p>
<p>Full code sample:-</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%2B%2B/RouteManually.cpp">Route Manually cpp</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_C%23/RouteManually.cs">Route Manually cs</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_VBA/RouteManually.cls">Route Manually vba</a></td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Java/RouteManually.java">Route Manually java</a></td>
<td><a class="reference external" href="https://github.com/tkim/emsx_api_repository/blob/master/EMSXFullSet_Python/RouteManually.py">Route Manually py</a></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Please right click on the top code sample link to open in a new tab.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processServiceStatusEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">session</span><span class="p">):</span>
    <span class="k">print</span> <span class="s2">&quot;Processing SERVICE_STATUS event&quot;</span>

    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">event</span><span class="p">:</span>

        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPENED</span><span class="p">:</span>
            <span class="k">print</span> <span class="s2">&quot;Service opened...&quot;</span>

            <span class="n">service</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">getService</span><span class="p">(</span><span class="n">d_service</span><span class="p">)</span>

            <span class="n">request</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">createRequest</span><span class="p">(</span><span class="s2">&quot;RouteManuallyEx&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are mandatory</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_SEQUENCE&quot;</span><span class="p">,</span> <span class="mi">3745218</span><span class="p">)</span>  <span class="c1"># Order number</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_AMOUNT&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_BROKER&quot;</span><span class="p">,</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_HAND_INSTRUCTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ANY&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_ORDER_TYPE&quot;</span><span class="p">,</span> <span class="s2">&quot;MKT&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TICKER&quot;</span><span class="p">,</span> <span class="s2">&quot;IBM US Equity&quot;</span><span class="p">)</span>
            <span class="n">request</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;EMSX_TIF&quot;</span><span class="p">,</span> <span class="s2">&quot;DAY&quot;</span><span class="p">)</span>

            <span class="c1"># The fields below are optional</span>
            <span class="c1">#request.set(&quot;EMSX_ACCOUNT&quot;,&quot;TestAccount&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_BOOKNAME&quot;,&quot;BookName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CFD_FLAG&quot;, &quot;1&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_ACCOUNT&quot;, &quot;ClrAccName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_CLEARING_FIRM&quot;, &quot;FirmName&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_EXEC_INSTRUCTIONS&quot;, &quot;AnyInst&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GET_WARNINGS&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_GTD_DATE&quot;, &quot;20170105&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LIMIT_PRICE&quot;, 123.45)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_BROKER&quot;, &quot;BMTB&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_ID&quot;, &quot;SomeID&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_LOCATE_REQ&quot;, &quot;Y&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_NOTES&quot;, &quot;Some notes&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_ODD_LOT&quot;, &quot;0&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_P_A&quot;, &quot;P&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_RELEASE_TIME&quot;, 34341)</span>
            <span class="c1">#request.set(&quot;EMSX_REQUEST_SEQ&quot;, 1001)</span>
            <span class="c1">#request.set(&quot;EMSX_ROUTE_REF_ID&quot;, &quot;UniqueRef&quot;)</span>
            <span class="c1">#request.set(&quot;EMSX_STOP_PRICE&quot;, 123.5)</span>
            <span class="c1">#request.set(&quot;EMSX_TRADER_UUID&quot;, 1234567)</span>

            <span class="c1"># Below we establish the strategy details</span>
            <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            strategy = request.getElement(&quot;EMSX_STRATEGY_PARAMS&quot;)</span>
<span class="sd">            strategy.setElement(&quot;EMSX_STRATEGY_NAME&quot;, &quot;VWAP&quot;)</span>

<span class="sd">            indicator = strategy.getElement(&quot;EMSX_STRATEGY_FIELD_INDICATORS&quot;)</span>
<span class="sd">            data = strategy.getElement(&quot;EMSX_STRATEGY_FIELDS&quot;)</span>

<span class="sd">            # Strategy parameters must be appended in the correct order. See the output</span>
<span class="sd">            # of GetBrokerStrategyInfo request for the order. The indicator value is 0 for</span>
<span class="sd">            # a field that carries a value, and 1 where the field should be ignored</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;09:30:00&quot;)  # StartTime</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 0)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;10:30:00&quot;)   # EndTime</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 0)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # Max%Volume</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # %AMSession</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # OPG</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # MOC</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # CompletePX</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # TriggerPX</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # DarkComplete</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # DarkCompPX</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # RefIndex</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>

<span class="sd">            data.appendElement().setElement(&quot;EMSX_FIELD_DATA&quot;, &quot;&quot;)           # Discretion</span>
<span class="sd">            indicator.appendElement().setElement(&quot;EMSX_FIELD_INDICATOR&quot;, 1)</span>
<span class="sd">            &#39;&#39;&#39;</span>

            <span class="k">print</span> <span class="s2">&quot;Request: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">request</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="o">=</span> <span class="n">blpapi</span><span class="o">.</span><span class="n">CorrelationId</span><span class="p">()</span>

            <span class="n">session</span><span class="o">.</span><span class="n">sendRequest</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">correlationId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">requestID</span> <span class="p">)</span>

        <span class="k">elif</span> <span class="n">msg</span><span class="o">.</span><span class="n">messageType</span><span class="p">()</span> <span class="o">==</span> <span class="n">SERVICE_OPEN_FAILURE</span><span class="p">:</span>
            <span class="k">print</span> <span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Error: Service failed to open&quot;</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="requestResponseSs.html" class="btn btn-neutral float-right" title="Sell-Side Request/Response Service" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="description.html" class="btn btn-neutral" title="Description of Request/Response Service" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Terrence C. Kim.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>